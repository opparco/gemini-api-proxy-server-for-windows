# Gemini API Proxy Server (C# Windows版)

Gemini APIへのリクエストとレスポンスをロギングおよび画像生成をモック化するプロキシアプリケーション

## 機能

1. **Gemini APIへのリクエストとレスポンスをロギング**
   - `generativelanguage.googleapis.com` へのすべてのリクエストとレスポンスをテキストファイルに書き出す
   - すべてのHTTPメソッドに対応

2. **画像生成向けのモード切替**
   - プロダクションモード: 通常通り画像生成（生成画像をPNGファイルとして保存）
   - モックモード: 画像生成を行う代わりに、ローカル画像を使用してレスポンスをエミュレート

## 必要条件

- Windows 10/11
- .NET 9.0
- 管理者権限（証明書のインストールのため）

## 開発者向けセットアップ

1. プロジェクトのビルド:

```
dotnet build
```

2. プレースホルダー画像の準備:
   - `placeholder.png` を実行ファイルと同じディレクトリに配置

## 開発者向け使用方法

1. 管理者権限でアプリケーションを実行:
```
dotnet run
```
または、ビルドしたEXEファイルを管理者として実行

2. コマンド:
   - `p`: Windows プロキシ設定を有効化
   - `q`: Windows プロキシ設定を無効化
   - `m`: プロダクションモードとモックモードを切り替え
   - `n`: ログディレクトリを新規作成（シーケンスIDをリセット）
   - `q`: プロキシを終了

## HTTPS通信の設定

このプロキシはHTTPS通信を傍受するため、初回実行時に自己署名証明書をシステムの信頼されたルート証明書ストアにインストールします。
そのため、管理者権限での実行が必要です。アプリケーション終了時に証明書は自動的に削除されます。
